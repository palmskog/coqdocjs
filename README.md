# CoqdocJS for coq-community

This project provides a collection of scripts to improve the HTML output of the
[coqdoc tool](https://coq.inria.fr/refman/practical-tools/utilities.html#documenting-coq-files-with-coqdoc)
bundled with the Coq proof assistant.

The scripts are derived from [CoqdocJS](https://github.com/tebbi/coqdocjs), but are
tailored for the needs of [coq-community](https://github.com/coq-community) projects.
The results of using the scripts can be seen here: https://coq-community.github.io/huffman/Huffman.Huffman.html

The scripts provide the following features:
- Customizable Unicode display:
  * It only changes the display; copy-paste from the HTML produces pure ASCII
  * It only replaces complete identifiers or notation tokens, possibly terminated by numbers or apostrophes
  * It does not replace randomly, e.g., in `omega` or `tauto`
  * To add new symbols, edit [config.js](resources/config.js)
- Proof hiding:
  * All proofs longer than one line are hidden by default. They can be uncovered by clicking on `Proof`.

All of this works with the ordinary coqdoc by configuring it to use a custom header
file including the required JavasScript code and some custom CSS.

## Usage

Copy `Makefile.coq.local` into your Coq project (assuming the file generated by `coq_makefile` is named `Makefile.coq`,
otherwise rename the file appropriately). Next, copy the `resources` directory into your project.
Finally, either edit `resources/index.md` manually to fit your project, or generate it from YAML metadata using
the corresponding mustache [template](https://github.com/coq-community/templates/blob/master/index.md.mustache).

You should then be able to run the following command to generate the project website in the `docs` directory:
```
make -f Makefile.coq docs
```
or just
```
make docs
```
if your main Makefile defers tasks to `Makefile.coq`.

Finally, push your `docs` directory and enable GitHub Pages for
your project (under Settings).

## Files

- [`Makefile.coq.local`](Makefile.coq.local): Makefile tasks for generating GitHub-friendly documentation
- [`config.js`](resources/config.js): contains the unicode replacement table
- [`coqdoc.css`](resources/coqdoc.css): a replacement for the default coqdoc CSS style. Can be removed to use the default style
- [`coqdocjs.js`](resources/coqdocjs.js) and [`coqdocjs.css`](resources/coqdocjs.css): the script rewriting the DOM and adding the dynamic features with a corresponding CSS style
- [`header.html`](resources/header.html) and [`footer.html`](resources/footer.html): custom header and footer files used in every generated html file

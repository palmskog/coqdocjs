# CoqdocJS for coq-community

CoqdocJS is a script to dynamically improve the coqdoc output.
The result can be seen here:

https://coq-community.github.io/huffman/Huffman.Huffman.html

It offers the following features:
- Customizable Unicode display:
	It only changes the display, copy-paste from the website produces pure ASCII.
	It only replaces complete identifiers or notation tokens, possibly terminated by numbers or apostrophes.
	It does not replace randomly, like in "omega." or "tauto."
	To add new symbols, edit [config.js](extra/resources/config.js).
- Proof hiding:
	All proofs longer than one line are hidden by default. They can be uncovered by clicking on "Proof...".

All of this works with the ordinary coqdoc, by asking coqdoc to use a header file including the javascript files and some custom CSS.

## Usage

Copy `Makefile.coq.local` into your Coq project (assuming the file generated by `coq_makefile` is named `Makefile.coq`,
otherwise rename the file appropriately). Next copy the `resources` directory, and edit `resources/index.md` with your project
information.

You should then be able to run the following command to generate the project website in the `docs` directory:
```
make -f Makefile.coq docs
```
or just
```
make docs
```
if your main Makefile defers tasks to `Makefile.coq`.

## Files

- [`Makefile.coq.local`](Makefile.coq.local): Makefile tasks for generating GitHub-friendly documentation
- [`config.js`](resources/config.js): contains the unicode replacement table
- [`coqdoc.css`](resources/coqdoc.css): a replacement for the default coqdoc CSS style. Can be removed to use the default style
- [`coqdocjs.js`](resources/coqdocjs.js) and [coqdocjs.css](extra/resources/coqdocjs.css): the script rewriting the DOM and adding the dynamic features with a corresponding CSS style
- [`header.html`](resources/header.html) and [`footer.html`](resources/footer.html): custom header and footer files used in every generated html file
